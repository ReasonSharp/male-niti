/*
============================================================================
============================================================================
 DESCRIPTION
============================================================================
============================================================================

 This is the initial version of the database.
 Author & Designer: Nikola Novak
 Contact          : nikola@maleniti.com
 Last modification: 2023-09-19
 Mod. description : Added databases, settings table, and initial values.
 Mod. history     : N/A

============================================================================
 DATABASES
============================================================================
 users                                                                 + NEW
 version                                                               + NEW

============================================================================
============================================================================
 DATABASE users
============================================================================
============================================================================

============================================================================
 DEFINITIONS
============================================================================

============================================================================
============================================================================
 DATABASE version
============================================================================
============================================================================

============================================================================
 DEFINITIONS
============================================================================

----------------------------------------------------------------------------
 Tables
----------------------------------------------------------------------------
 setting                                                               + NEW

============================================================================
 IMPLEMENTATIONS
============================================================================
*/

CREATE DATABASE version;
CREATE DATABASE users;

\c version
CREATE TABLE IF NOT EXISTS setting (
 settingName VARCHAR(20) NOT NULL PRIMARY KEY,
 settingValue TEXT
);

INSERT INTO setting (settingName, settingValue) VALUES
 ('dbVersion', '001'),
 ('minAllowedVersion', '000'),
 ('versionDate', '2023-09-19'),
 ('allowDropDatabase', 'YES')
 ON CONFLICT (settingName) DO UPDATE SET settingValue = EXCLUDED.settingValue;